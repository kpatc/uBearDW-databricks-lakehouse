{
  "name": "uBear_DW_Streaming_Pipelines",
  "description": "Pipelines DLT streaming continus pour ingestion Bronze et transformation Silver",
  "email_notifications": {
    "on_failure": ["data-team@ubear.com"]
  },
  "timeout_seconds": 0,
  "max_concurrent_runs": 1,
  "tasks": [
    {
      "task_key": "bronze_streaming_pipeline",
      "description": "Pipeline DLT Bronze - Ingestion streaming depuis Kafka/Debezium",
      "pipeline_task": {
        "pipeline_id": "${var.bronze_pipeline_id}",
        "full_refresh": false
      },
      "timeout_seconds": 0
    },
    {
      "task_key": "silver_streaming_pipeline",
      "description": "Pipeline DLT Silver - Transformation et nettoyage",
      "depends_on": [
        {
          "task_key": "bronze_streaming_pipeline"
        }
      ],
      "pipeline_task": {
        "pipeline_id": "${var.silver_pipeline_id}",
        "full_refresh": false
      },
      "timeout_seconds": 0
    }
  ],
  "schedule": {
    "quartz_cron_expression": "0 0 0 ? * * *",
    "timezone_id": "UTC",
    "pause_status": "UNPAUSED"
  },
  "continuous": {
    "pause_status": "UNPAUSED"
  },
  "format": "MULTI_TASK"
}
